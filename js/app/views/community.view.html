<div class="jumbotron title">
    <div class="container no-padding-left">
        <ol class="breadcrumb">
            <li><a href="#/" target="_self">Hem</a></li>
            <li class="active">Community</li>
        </ol>
        <h1>Community</h1>
    </div>
</div>

<div class="container no-padding-top word-wrap">
    <div class="row padding-bottom">
        <h2>Diskutera Västtrafiks API:er med oss och andra utvecklare</h2>
    </div>

    <div class="row color-white">
        <div class="col-md-4 row-xs no-padding-right-lg no-padding-left-lg">
            <div class="col-xs-12 com-popular quick-box">
                <div ng-if="vm.labels.popular.id" data-balloon="{{vm.labels.popular.subject}}" data-balloon-pos="up">
                    <h3 class="truncate"><a href="#/community/topic/{{vm.labels.popular.id}}" class="color-white">{{vm.labels.popular.subject}}</a></h3>
                    <p><strong><a href="#/community/forum/{{vm.labels.popular.forumId}}" class="color-white">{{vm.labels.popular.forumName}}</a></strong></p>
                    <p>{{vm.labels.popular.lastPostDate | relativeDate}}</p>

                    <div class="row no-word-wrap hide-xs" style="width: 50%">
                        <div class="col-md-5 text-center no-padding-top">
                            <h3 class="no-margin-bottom no-margin-top">{{vm.labels.popular.numberOfPosts}}</h3>
                            <p>Inlägg</p>
                        </div>
                        <div class="col-md-5 text-center no-padding-top">
                            <h3 class="no-margin-bottom no-margin-top">{{vm.labels.popular.numberOfAnswers}}</h3>
                            <p>Svar</p>
                        </div>
                        <div class="col-md-2">
                        </div>
                    </div>

                </div>
                <div ng-if="!vm.labels.popular.id">
                    <h3>Det finns inga populära frågor ännu. <br/><br/>Ställ gärna en!</h3>
                </div>

                <span style="position: absolute;bottom: 5px;right: 10px; font-size: 12px" data-balloon="Populär" data-balloon-pos="up"><a href="{{'#' + vm.locationPath + '/popular'}}" class="color-white">Populär</a></span>
            </div>
        </div>
        <div class="col-md-4 row-xs no-padding-right-lg">
            <div class="col-xs-12 com-answered quick-box">
                <div ng-if="vm.labels.answered.id" data-balloon="{{vm.labels.answered.subject}}" data-balloon-pos="up">
                    <h3 class="truncate"><a href="#/community/topic/{{vm.labels.answered.id}}" class="color-white">{{vm.labels.answered.subject}}</a></h3>
                    <p><strong><a href="#/community/forum/{{vm.labels.answered.forumId}}" class="color-white">{{vm.labels.answered.forumName}}</a></strong></p>
                    <p>{{vm.labels.answered.lastPostDate | relativeDate}}</p>

                    <div class="row no-word-wrap hide-xs" style="width: 50%">
                        <div class="col-md-5 text-center no-padding-top">
                            <h3 class="no-margin-bottom no-margin-top">{{vm.labels.answered.numberOfPosts}}</h3>
                            <p>Inlägg</p>
                        </div>
                        <div class="col-md-5 text-center no-padding-top">
                            <h3 class="no-margin-bottom no-margin-top">{{vm.labels.answered.numberOfAnswers}}</h3>
                            <p>Svar</p>
                        </div>
                        <div class="col-md-2">
                        </div>
                    </div>

                </div>
                <div ng-if="!vm.labels.answered.id">
                    <h3>Inga frågor är ännu besvarade. <br/><br/>Hjälp gärna till!</h3>
                </div>
                <span style="position: absolute;bottom: 5px;right: 10px; font-size: 12px" data-balloon="Senaste besvarade fråga" data-balloon-pos="up"><a href="{{'#' + vm.locationPath + '/answered'}}" class="color-white">Senast besvarad</a></span>
            </div>
        </div>
        <div class="col-md-4 row-xs no-padding-right-lg">
            <div class="col-xs-12 com-unanswered quick-box">
                <div ng-if="vm.labels.unanswered.id" data-balloon="{{vm.labels.unanswered.subject}}" data-balloon-pos="up">
                    <h3 class="truncate"><a href="#/community/topic/{{vm.labels.unanswered.id}}" class="color-white">{{vm.labels.unanswered.subject}}</a></h3>
                    <p><strong><a href="#/community/forum/{{vm.labels.unanswered.forumId}}" class="color-white">{{vm.labels.unanswered.forumName}}</a></strong></p>
                    <p>{{vm.labels.unanswered.lastPostDate | relativeDate}}</p>

                    <div class="row no-word-wrap hide-xs" style="width: 50%">
                        <div class="col-md-5 text-center no-padding-top">
                            <h3 class="no-margin-bottom no-margin-top">{{vm.labels.unanswered.numberOfPosts}}</h3>
                            <p>Inlägg</p>
                        </div>
                        <div class="col-md-5 text-center no-padding-top">
                            <h3 class="no-margin-bottom no-margin-top">{{vm.labels.unanswered.numberOfAnswers}}</h3>
                            <p>Svar</p>
                        </div>
                        <div class="col-md-2">
                        </div>
                    </div>

                </div>
                <div ng-if="!vm.labels.unanswered.id">
                    <h3>Det finns inga obesvarade frågor. <br/><br/>Ställ gärna en ny!</h3>
                </div>
                <span style="position: absolute;bottom: 5px;right: 10px; font-size: 12px" data-balloon="Senaste obesvarade fråga" data-balloon-pos="up"><a href="{{'#' + vm.locationPath + '/unanswered'}}" class="color-white">Senast obesvarad</a></span>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-12">
            <table class="table table-borderless">
                <thead class="table-header">
                    <tr>
                        <th colspan="3">
                            <h1>Kategorier</h1></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="entries in vm.categories | orderBy:'id'">
                        <td style="width: 50px">
                            <div class="area area-small">
                                <span class="{{entries.imageURL}}" aria-hidden="true"></span>
                            </div>
                        </td>
                        <td>
                            <h2 class="no-margin-bottom"><a href="#/community/category/{{entries.id}}">{{entries.name}}</a></h2>
                        </td>
                        <td class="text-center">
                            <h2 class="no-margin-bottom">{{entries.numberOfForums}}</h2>
                            <p>Forum</p>
                        </td>
                        <td ng-if="entries.lastPost.length > 0" class="padding-left-medium pointer" style="width: 50%" ng-click="vm.communityService.redirectToTopic(entries.lastPost.topicId)">
                            <div class="row padding-bottom-mini">
                                <span uib-popover-html="entries.lastPost.createdBy.gravatarProfileInfo.bioHTML + '<b>Community-poäng:</b> ' + entries.lastPost.createdBy.rankings[0].currentPoints" popover-is-open="popoverIsOpen" ng-mouseenter="popoverIsOpen = !popoverIsOpen" ng-mouseleave="popoverIsOpen = !popoverIsOpen"
                                    popover-title="{{entries.lastPost.createdBy.gravatarProfileInfo.name}}">
                <span ng-if="!entries.lastPost.createdBy.useGravatar" class="fa-stack">
                            <i class="fa fa-circle fa-stack-2x color-blue"></i>
                            <i class="fa fa-user fa-stack-1x fa-inverse color-white"></i>
                </span>
                                <img ng-if="entries.lastPost.createdBy.useGravatar" src="https://www.gravatar.com/avatar/{{entries.lastPost.createdBy.gravatarEmailHash}}?s=35" class="avatar-small margin-right-mini fa-stack">
                                <span class="signature padding-right-mini">{{entries.lastPost.createdBy.signature}}</span>&bull;
                                </span>
                                <span class="margin-left-mini">{{entries.lastPost.createDate | relativeDate}}</span>

                            </div>
                            <div class="row simple-well margin-bottom-mini" style="font-size: 14px">{{entries.lastPost.text | removeMd | cut:true:150:' ...'}}</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
